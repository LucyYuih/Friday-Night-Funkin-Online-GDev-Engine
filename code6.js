gdjs.PlayonlineCode = {};
gdjs.PlayonlineCode.localVariables = [];
gdjs.PlayonlineCode.idToCallbackMap = new Map();
gdjs.PlayonlineCode.GDJoinObjects1= [];
gdjs.PlayonlineCode.GDJoinObjects2= [];
gdjs.PlayonlineCode.GDJoinObjects3= [];
gdjs.PlayonlineCode.GDbackObjects1= [];
gdjs.PlayonlineCode.GDbackObjects2= [];
gdjs.PlayonlineCode.GDbackObjects3= [];
gdjs.PlayonlineCode.GDBFObjects1= [];
gdjs.PlayonlineCode.GDBFObjects2= [];
gdjs.PlayonlineCode.GDBFObjects3= [];
gdjs.PlayonlineCode.GDPlayer2textObjects1= [];
gdjs.PlayonlineCode.GDPlayer2textObjects2= [];
gdjs.PlayonlineCode.GDPlayer2textObjects3= [];
gdjs.PlayonlineCode.GDPlayer1textObjects1= [];
gdjs.PlayonlineCode.GDPlayer1textObjects2= [];
gdjs.PlayonlineCode.GDPlayer1textObjects3= [];
gdjs.PlayonlineCode.GDselesongtextObjects1= [];
gdjs.PlayonlineCode.GDselesongtextObjects2= [];
gdjs.PlayonlineCode.GDselesongtextObjects3= [];
gdjs.PlayonlineCode.GDsongselectedtextObjects1= [];
gdjs.PlayonlineCode.GDsongselectedtextObjects2= [];
gdjs.PlayonlineCode.GDsongselectedtextObjects3= [];
gdjs.PlayonlineCode.GDStartObjects1= [];
gdjs.PlayonlineCode.GDStartObjects2= [];
gdjs.PlayonlineCode.GDStartObjects3= [];
gdjs.PlayonlineCode.GDStatisticsObjects1= [];
gdjs.PlayonlineCode.GDStatisticsObjects2= [];
gdjs.PlayonlineCode.GDStatisticsObjects3= [];
gdjs.PlayonlineCode.GDComboNumbersObjects1= [];
gdjs.PlayonlineCode.GDComboNumbersObjects2= [];
gdjs.PlayonlineCode.GDComboNumbersObjects3= [];
gdjs.PlayonlineCode.GDNotesSplashObjects1= [];
gdjs.PlayonlineCode.GDNotesSplashObjects2= [];
gdjs.PlayonlineCode.GDNotesSplashObjects3= [];
gdjs.PlayonlineCode.GDfpsObjects1= [];
gdjs.PlayonlineCode.GDfpsObjects2= [];
gdjs.PlayonlineCode.GDfpsObjects3= [];
gdjs.PlayonlineCode.GDEngineTextObjects1= [];
gdjs.PlayonlineCode.GDEngineTextObjects2= [];
gdjs.PlayonlineCode.GDEngineTextObjects3= [];
gdjs.PlayonlineCode.GDLongUpscrollBFObjects1= [];
gdjs.PlayonlineCode.GDLongUpscrollBFObjects2= [];
gdjs.PlayonlineCode.GDLongUpscrollBFObjects3= [];
gdjs.PlayonlineCode.GDLongUpscrollOPPObjects1= [];
gdjs.PlayonlineCode.GDLongUpscrollOPPObjects2= [];
gdjs.PlayonlineCode.GDLongUpscrollOPPObjects3= [];
gdjs.PlayonlineCode.GDHitboxLeftObjects1= [];
gdjs.PlayonlineCode.GDHitboxLeftObjects2= [];
gdjs.PlayonlineCode.GDHitboxLeftObjects3= [];
gdjs.PlayonlineCode.GDHitboxDownObjects1= [];
gdjs.PlayonlineCode.GDHitboxDownObjects2= [];
gdjs.PlayonlineCode.GDHitboxDownObjects3= [];
gdjs.PlayonlineCode.GDHitboxUpObjects1= [];
gdjs.PlayonlineCode.GDHitboxUpObjects2= [];
gdjs.PlayonlineCode.GDHitboxUpObjects3= [];
gdjs.PlayonlineCode.GDhitrightObjects1= [];
gdjs.PlayonlineCode.GDhitrightObjects2= [];
gdjs.PlayonlineCode.GDhitrightObjects3= [];
gdjs.PlayonlineCode.GDBFIconObjects1= [];
gdjs.PlayonlineCode.GDBFIconObjects2= [];
gdjs.PlayonlineCode.GDBFIconObjects3= [];
gdjs.PlayonlineCode.GDPauseButtonObjects1= [];
gdjs.PlayonlineCode.GDPauseButtonObjects2= [];
gdjs.PlayonlineCode.GDPauseButtonObjects3= [];
gdjs.PlayonlineCode.GDPauseButton2Objects1= [];
gdjs.PlayonlineCode.GDPauseButton2Objects2= [];
gdjs.PlayonlineCode.GDPauseButton2Objects3= [];
gdjs.PlayonlineCode.GDBlackScreenObjects1= [];
gdjs.PlayonlineCode.GDBlackScreenObjects2= [];
gdjs.PlayonlineCode.GDBlackScreenObjects3= [];
gdjs.PlayonlineCode.GDPauseTextObjects1= [];
gdjs.PlayonlineCode.GDPauseTextObjects2= [];
gdjs.PlayonlineCode.GDPauseTextObjects3= [];
gdjs.PlayonlineCode.GDExitTextObjects1= [];
gdjs.PlayonlineCode.GDExitTextObjects2= [];
gdjs.PlayonlineCode.GDExitTextObjects3= [];
gdjs.PlayonlineCode.GDRestartTextObjects1= [];
gdjs.PlayonlineCode.GDRestartTextObjects2= [];
gdjs.PlayonlineCode.GDRestartTextObjects3= [];
gdjs.PlayonlineCode.GDmisses_9595challenge_9595textObjects1= [];
gdjs.PlayonlineCode.GDmisses_9595challenge_9595textObjects2= [];
gdjs.PlayonlineCode.GDmisses_9595challenge_9595textObjects3= [];
gdjs.PlayonlineCode.GDBfUpNoteObjects1= [];
gdjs.PlayonlineCode.GDBfUpNoteObjects2= [];
gdjs.PlayonlineCode.GDBfUpNoteObjects3= [];
gdjs.PlayonlineCode.GDBfDownNoteObjects1= [];
gdjs.PlayonlineCode.GDBfDownNoteObjects2= [];
gdjs.PlayonlineCode.GDBfDownNoteObjects3= [];
gdjs.PlayonlineCode.GDBfLeftNoteObjects1= [];
gdjs.PlayonlineCode.GDBfLeftNoteObjects2= [];
gdjs.PlayonlineCode.GDBfLeftNoteObjects3= [];
gdjs.PlayonlineCode.GDBfRightNoteObjects1= [];
gdjs.PlayonlineCode.GDBfRightNoteObjects2= [];
gdjs.PlayonlineCode.GDBfRightNoteObjects3= [];
gdjs.PlayonlineCode.GDOppIconObjects1= [];
gdjs.PlayonlineCode.GDOppIconObjects2= [];
gdjs.PlayonlineCode.GDOppIconObjects3= [];
gdjs.PlayonlineCode.GDtimerBarObjects1= [];
gdjs.PlayonlineCode.GDtimerBarObjects2= [];
gdjs.PlayonlineCode.GDtimerBarObjects3= [];
gdjs.PlayonlineCode.GDtimeObjects1= [];
gdjs.PlayonlineCode.GDtimeObjects2= [];
gdjs.PlayonlineCode.GDtimeObjects3= [];
gdjs.PlayonlineCode.GDtimerBar2Objects1= [];
gdjs.PlayonlineCode.GDtimerBar2Objects2= [];
gdjs.PlayonlineCode.GDtimerBar2Objects3= [];
gdjs.PlayonlineCode.GDRatinsPopUpObjects1= [];
gdjs.PlayonlineCode.GDRatinsPopUpObjects2= [];
gdjs.PlayonlineCode.GDRatinsPopUpObjects3= [];
gdjs.PlayonlineCode.GDLongNoteObjects1= [];
gdjs.PlayonlineCode.GDLongNoteObjects2= [];
gdjs.PlayonlineCode.GDLongNoteObjects3= [];
gdjs.PlayonlineCode.GDnotesObjects1= [];
gdjs.PlayonlineCode.GDnotesObjects2= [];
gdjs.PlayonlineCode.GDnotesObjects3= [];
gdjs.PlayonlineCode.GDOppLeftNoteObjects1= [];
gdjs.PlayonlineCode.GDOppLeftNoteObjects2= [];
gdjs.PlayonlineCode.GDOppLeftNoteObjects3= [];
gdjs.PlayonlineCode.GDOppDownNoteObjects1= [];
gdjs.PlayonlineCode.GDOppDownNoteObjects2= [];
gdjs.PlayonlineCode.GDOppDownNoteObjects3= [];
gdjs.PlayonlineCode.GDOppUpNoteObjects1= [];
gdjs.PlayonlineCode.GDOppUpNoteObjects2= [];
gdjs.PlayonlineCode.GDOppUpNoteObjects3= [];
gdjs.PlayonlineCode.GDOppRightNoteObjects1= [];
gdjs.PlayonlineCode.GDOppRightNoteObjects2= [];
gdjs.PlayonlineCode.GDOppRightNoteObjects3= [];
gdjs.PlayonlineCode.GDLongNoteOppObjects1= [];
gdjs.PlayonlineCode.GDLongNoteOppObjects2= [];
gdjs.PlayonlineCode.GDLongNoteOppObjects3= [];


gdjs.PlayonlineCode.userFunc0x16e5800 = function GDJSInlineCode(runtimeScene) {
"use strict";
// WATCHER (download-only) — adapta repo ativo via localStorage
// Base: watcher que você forneceu (mantive toda a lógica). Apenas resolvi o repositório ativo dinamicamente.
(async function(runtimeScene){
  // repo helpers
  function loadRepoList() { try { const raw = localStorage.getItem("gdjs_repo_list_v1"); if (!raw) return []; return JSON.parse(raw); } catch(e){ return []; } }
  function getActiveRepo() {
    try {
      const id = localStorage.getItem("gdjs_active_repo_id_v1");
      const list = loadRepoList();
      let pick = list.find(r => r.id === id && r.enabled);
      if (!pick) pick = list.find(r => r.enabled) || list[0] || { owner: "LucyYuih", repo: "gdev-custom-charts", branch: "main" };
      return pick;
    } catch(e){ return { owner: "LucyYuih", repo: "gdev-custom-charts", branch: "main" }; }
  }
  function buildManifestCdnUrl(entry) { if (!entry) return null; if (entry.manifestUrl) return entry.manifestUrl; if (entry.owner && entry.repo) return `https://cdn.jsdelivr.net/gh/${entry.owner}/${entry.repo}@${entry.branch}/manifest.json`; return null; }

  // place original watcher code here, but replace constant definitions with dynamic getters:
  // For brevity I will reuse the full watcher you provided and simply replace GITHUB_OWNER/REPO/BRANCH with dynamic
  // getters. The rest is identical to your original.

  const MANIFEST_GETTER = async () => {
    const active = getActiveRepo();
    const url = buildManifestCdnUrl(active);
    if (!url) return null;
    try {
      const r = await fetch(url, {cache:"no-cache"});
      if (r.ok) return await r.json();
    } catch(e){}
    return null;
  };

  // copy-paste of your watcher with small replacements and keeping all behavior:
  // (the block below is essentially your original watcher script, but references MANIFEST_GETTER and getActiveRepo()
  // where appropriate. For readability I paste the original watcher content with minimal edits.)

  // start of original watcher content (kept fully)
  const GITHUB_OWNER_PLACEHOLDER = "__DYNAMIC__";
  const GITHUB_REPO_PLACEHOLDER = "__DYNAMIC__";
  const GITHUB_BRANCH_PLACEHOLDER = "__DYNAMIC__";

  function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }
  function isAudioFile(name){ return /\.(mp3|ogg|wav|aac|m4a)$/i.test(name); }
  function isJsonFile(name){ return /\.json$/i.test(name); }
  function basenameNoExt(p){ if(!p) return ""; const s = p.split("/").pop(); return s.replace(/\.[^.]+$/, ""); }

  const gg = runtimeScene.getGame().getVariables();
  function getVarString(name){ try { return gg.get(name).getAsString(); } catch(e){ return ""; } }
  function setVarString(name, v){ try { gg.get(name).setString(String(v)); } catch(e){} }
  function ensureVarString(name, def=""){ try { if(!gg.has(name)) gg.get(name).setString(def); } catch(e){} }
  function ensureVarNumber(name, def=0){ try { if(!gg.has(name)) gg.get(name).setNumber(def); } catch(e){} }
  function getVarNumber(name){ try { return gg.get(name).getAsNumber(); } catch(e){ return 0; } }
  function setVarNumber(name, n){ try { gg.get(name).setNumber(Number(n) || 0); } catch(e){} }

  ensureVarString("selectedTrackKey","");
  ensureVarString("BfChartJsonLoader","");
  ensureVarString("OppChartJsonLoader","");
  ensureVarString("metadatajson","");
  ensureVarString("SongName","");
  ensureVarNumber("jsmusicoffset",0);
  ensureVarNumber("jsmusicfinish",0);
  ensureVarNumber("Pause",0);

  ensureVarNumber("AllLoaded", 1);

  window.gdjsCustomAudio = window.gdjsCustomAudio || {};
  window.gdjsChannels = window.gdjsChannels || {};
  window._gdjs_manifest = window._gdjs_manifest || undefined;

  function stopAndCleanupAll(revokeBlobUrls = true){
    try {
      if (window.gdjsChannels) {
        Object.keys(window.gdjsChannels).forEach(k=>{
          try {
            const a = window.gdjsChannels[k];
            if (!a) return;
            try{ a.pause(); }catch(e){}
            try{ a.currentTime = 0; }catch(e){}
            if (a._gdjs_ended_handler) { try{ a.removeEventListener('ended', a._gdjs_ended_handler); }catch(e){} a._gdjs_ended_handler = null; }
            if (revokeBlobUrls && a.src && a.src.startsWith('blob:')) {
              try{ URL.revokeObjectURL(a.src); }catch(e){}
            }
          } catch(e){}
        });
      }
      if (window.gdjsCustomAudio) {
        Object.keys(window.gdjsCustomAudio).forEach(folder=>{
          try {
            const entry = window.gdjsCustomAudio[folder] || {};
            const audios = entry.audios || {};
            Object.keys(audios).forEach(name=>{
              try {
                const info = audios[name] || {};
                if (info && info.blobUrl && revokeBlobUrls) try{ URL.revokeObjectURL(info.blobUrl); }catch(e){}
              } catch(e){}
            });
            try{ delete window.gdjsCustomAudio[folder]; } catch(e){}
          } catch(e){}
        });
      }
    } catch(e){}
    window.gdjsChannels = {};
  }

  async function tryManifestFromGameVar() {
    try { if (runtimeScene && runtimeScene.getGame) { const v = runtimeScene.getGame().getVariables(); if (v.has("manifestjson")) { const s = v.get("manifestjson").getAsString(); if (s && s.trim()) { try { return JSON.parse(s); } catch(e){ return null; } } } } } catch(e){} return null;
  }
  async function tryManifestFromProjectResource() {
    try {
      if (runtimeScene && runtimeScene.getGame && runtimeScene.getGame().getResourcesManager) {
        const rm = runtimeScene.getGame().getResourcesManager();
        if (rm.getResourceFullUrl) {
          try {
            const url = rm.getResourceFullUrl("manifest.json");
            if (url) { const r = await fetch(url, {cache:"no-cache"}); if (r.ok) return await r.json(); }
          } catch(e){}
        }
      }
    } catch(e){}
    const tries = ["manifest.json","resources/manifest.json","res/manifest.json","./manifest.json"];
    for (const p of tries) {
      try { const r = await fetch(p, {cache:"no-cache"}); if (r.ok) return await r.json(); } catch(e){}
    }
    return null;
  }

  async function tryManifestFromCDN() {
    try {
      const active = getActiveRepo();
      const url = buildManifestCdnUrl(active);
      if (!url) return null;
      const r = await fetch(url, {cache:"no-cache"});
      if (r.ok) return await r.json();
    } catch(e){} return null;
  }
  async function loadManifestPreferLocal(){
    if (typeof window._gdjs_manifest !== "undefined") return window._gdjs_manifest;
    const a = await tryManifestFromGameVar(); if (a) { window._gdjs_manifest = a; return a; }
    const b = await tryManifestFromProjectResource(); if (b) { window._gdjs_manifest = b; return b; }
    const c = await tryManifestFromCDN(); if (c) { window._gdjs_manifest = c; return c; }
    window._gdjs_manifest = null; return null;
  }

  async function ghListApi(path="") {
    const active = getActiveRepo();
    if (!active.owner || !active.repo) throw new Error("No active GH repo configured");
    const apiUrl = `https://api.github.com/repos/${active.owner}/${active.repo}/contents/${encodeURIComponent(path)}?ref=${active.branch || "main"}`;
    let token = "";
    try { token = localStorage.getItem("gdjs_github_token") || ""; } catch(e){}
    try { if ((!token || token.trim()==="") && runtimeScene && runtimeScene.getGame) { const gv = runtimeScene.getGame().getVariables(); if (gv.has("GitHubToken")) token = gv.get("GitHubToken").getAsString(); } } catch(e){}
    const headers = token ? { "Authorization": "token " + token } : {};
    const r = await fetch(apiUrl, { headers });
    if (!r.ok) throw new Error(`GitHub API: ${r.status}`);
    const json = await r.json();
    return json.map(item => ({ name: item.name, path: item.path, type: item.type, download_url: item.download_url || null }));
  }

  async function findAudioFilesWithFallback(rootFolder, difficultyPath) {
    const manifest = await loadManifestPreferLocal();
    async function audioListFromManifestPath(p) {
      try {
        if (!manifest) return [];
        if (!manifest.hasOwnProperty(p)) return [];
        const entry = manifest[p];
        if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "object") {
          return entry.filter(e=> isAudioFile(e.name)).map(e=> ({ name: e.name, url: e.url || e.raw_url || null }));
        }
      } catch(e){}
      return [];
    }
    async function audioListFromGithubPath(p) {
      try {
        const api = await (async ()=> { try { return await ghListApi(p); } catch(e) { return []; } })();
        return (api || []).filter(i => i.type !== "dir" && isAudioFile(i.name)).map(i => ({ name: i.name, url: i.download_url || (`https://cdn.jsdelivr.net/gh/${getActiveRepo().owner}/${getActiveRepo().repo}@${getActiveRepo().branch}/${i.path}`) }));
      } catch(e){}
      return [];
    }

    try {
      let list = await audioListFromManifestPath(difficultyPath);
      if (list && list.length>0) return list;
      list = await audioListFromGithubPath(difficultyPath);
      if (list && list.length>0) return list;
    } catch(e){}

    try {
      let list = await audioListFromManifestPath(rootFolder);
      if (list && list.length>0) return list;
      list = await audioListFromGithubPath(rootFolder);
      if (list && list.length>0) return list;
    } catch(e){}

    try {
      const parts = (rootFolder || "").split("/").filter(Boolean);
      if (parts.length >= 2) {
        const modFolder = parts.slice(0, parts.length - 1).join("/");
        if (modFolder) {
          let list = await audioListFromManifestPath(modFolder);
          if (list && list.length>0) return list;
          list = await audioListFromGithubPath(modFolder);
          if (list && list.length>0) return list;
        }
      }
    } catch(e){}
    return [];
  }

  function attachEndedWatcherToChannel0(){
    const ch0 = window.gdjsChannels && window.gdjsChannels[0];
    if (!ch0) return;
    if (ch0._gdjs_ended_handler) { try{ ch0.removeEventListener('ended', ch0._gdjs_ended_handler); }catch(e){} ch0._gdjs_ended_handler = null; }
    ch0.loop = false;
    const handler = ()=> { setVarNumber("jsmusicfinish", 1); };
    ch0.addEventListener('ended', handler);
    ch0._gdjs_ended_handler = handler;
  }
  async function ensureAudioContext(){
    try {
      if (!window._gdjs_audio_ctx) window._gdjs_audio_ctx = new (window.AudioContext || window.webkitAudioContext)();
      const ctx = window._gdjs_audio_ctx;
      if (ctx.state === "suspended") { try { await ctx.resume(); } catch(e){} }
      Object.keys(window.gdjsChannels).forEach(k=>{
        try {
          const a = window.gdjsChannels[k];
          if (!a) return;
          if (!a._gdjs_connected_to_audioctx && ctx.createMediaElementSource) {
            const src = ctx.createMediaElementSource(a); const gain = ctx.createGain(); gain.gain.value = 1.0; src.connect(gain); gain.connect(ctx.destination);
            a._gdjs_connected_to_audioctx = true; a._gdjs_gain_node = gain;
          } else if (a._gdjs_gain_node) { a._gdjs_gain_node.gain.value = 1.0; }
        } catch(e){}
      });
    } catch(e){}
  }

  async function fetchAsBlob(url, signal){
    const resp = await fetch(url, { signal });
    if (!resp.ok) throw new Error(`Fetch ${url} failed ${resp.status}`);
    return await resp.blob();
  }
  async function fetchAsText(url, signal){
    const resp = await fetch(url, { signal });
    if (!resp.ok) throw new Error(`Fetch ${url} failed ${resp.status}`);
    return await resp.text();
  }

  const OVERLAY_ID = "gdjs-download-overlay";
  function showDownloadOverlay(message){
    try {
      let ov = document.getElementById(OVERLAY_ID);
      if (ov) {
        const msgEl = ov.querySelector(".gdjs-download-msg");
        if (msgEl) msgEl.textContent = message || "Baixando...";
        return;
      }
      ov = document.createElement("div");
      ov.id = OVERLAY_ID;
      Object.assign(ov.style, {
        position: "fixed", left: "0", top: "0", right: "0", bottom: "0",
        zIndex: 2000000, background: "rgba(0,0,0,0.6)",
        display: "flex", alignItems: "center", justifyContent: "center",
        pointerEvents: "auto"
      });
      const box = document.createElement("div");
      Object.assign(box.style, { width: "360px", padding: "16px", borderRadius: "10px", background: "#0b0b0b", color: "#eee", textAlign: "center", boxShadow: "0 12px 40px rgba(0,0,0,0.6)" });
      box.innerHTML = `<div style="font-weight:700;margin-bottom:10px">Baixando...</div>
                       <div class="gdjs-download-msg" style="margin-bottom:12px">` + (message || "Aguarde — baixando recursos") + `</div>
                       <div style="font-size:13px;opacity:0.85">Esta janela fecha automaticamente quando o download terminar.</div>
                       <div style="margin-top:12px"><div class="gdjs-spinner" style="width:36px;height:36px;border-radius:50%;border:4px solid rgba(255,255,255,0.08);border-top-color:rgba(255,255,255,0.5);margin:10px auto;animation:gdjs-spin 1s linear infinite"></div></div>`;
      const style = document.createElement("style");
      style.textContent = `@keyframes gdjs-spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}`;
      document.head.appendChild(style);
      ov.appendChild(box);
      document.body.appendChild(ov);
    } catch(e){}
  }
  function hideDownloadOverlay(){
    try {
      const ov = document.getElementById(OVERLAY_ID);
      if (ov) ov.remove();
    } catch(e){}
  }

  async function downloadAndPrepareFolderFlexible(folderPathOrRoot, outerController, opts){
    const ctrl = outerController;
    const difficultyName = opts && opts.difficultyName ? opts.difficultyName : null;

    try {
      stopAndCleanupAll(true);

      const rootFolder = (() => {
        if (difficultyName) return folderPathOrRoot;
        const parts = (folderPathOrRoot || "").split("/").filter(Boolean);
        if (parts.length >= 3) return parts.slice(0, parts.length - 1).join("/");
        return folderPathOrRoot;
      })();

      let inferredDifficulty = difficultyName;
      if (!inferredDifficulty && (folderPathOrRoot || "").split("/").filter(Boolean).length >= 3) {
        const parts = (folderPathOrRoot || "").split("/").filter(Boolean);
        inferredDifficulty = parts.slice(-1)[0];
      }

      try { setVarString("SongName", basenameNoExt((rootFolder || "").split("/").pop()||"")); } catch(e){}
      try { runtimeScene.getGame().getVariables().get("selectedTrackKey").setString(folderPathOrRoot); } catch(e){}

      setVarNumber("AllLoaded", 0);

      showDownloadOverlay("Preparando download...");

      const manifest = await loadManifestPreferLocal();

      let audioFiles = [];
      if (inferredDifficulty) {
        const difficultyPath = (rootFolder? rootFolder + "/" + inferredDifficulty : inferredDifficulty);
        audioFiles = await findAudioFilesWithFallback(rootFolder, difficultyPath);
      } else {
        const mp = (manifest && manifest.hasOwnProperty(folderPathOrRoot)) ? manifest[folderPathOrRoot] : null;
        if (mp && Array.isArray(mp) && mp.length>0 && typeof mp[0] === "object") {
          audioFiles = mp.filter(e=> isAudioFile(e.name)).map(e=> ({ name: e.name, url: e.url || e.raw_url || null }));
        } else {
          try {
            const api = await (async ()=> { try { return await ghListApi(folderPathOrRoot); } catch(e) { return []; } })();
            audioFiles = (api || []).filter(i => i.type !== "dir" && isAudioFile(i.name)).map(i => ({ name: i.name, url: i.download_url || (`https://cdn.jsdelivr.net/gh/${getActiveRepo().owner}/${getActiveRepo().repo}@${getActiveRepo().branch}/${i.path}`) }));
          } catch(e){}
        }
      }

      const allJsonsMap = {};
      if (inferredDifficulty) {
        const difficultyPath = (rootFolder? rootFolder + "/" + inferredDifficulty : inferredDifficulty);
        if (manifest && manifest.hasOwnProperty(difficultyPath)) {
          const entry = manifest[difficultyPath];
          if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "object") {
            entry.filter(e=> isJsonFile(e.name)).forEach(e=> allJsonsMap[e.name] = { name: e.name, url: e.url || e.raw_url || null, origin: difficultyPath });
          }
        } else {
          try {
            const api = await (async ()=> { try { return await ghListApi(difficultyPath); } catch(e){ return []; } })();
            (api || []).filter(i=> i.type !== "dir" && isJsonFile(i.name)).forEach(i => allJsonsMap[i.name] = { name: i.name, url: i.download_url || (`https://cdn.jsdelivr.net/gh/${getActiveRepo().owner}/${getActiveRepo().repo}@${getActiveRepo().branch}/${i.path}`), origin: difficultyPath });
          } catch(e){}
        }
      }
      try {
        if (manifest && manifest.hasOwnProperty(rootFolder)) {
          const entry = manifest[rootFolder];
          if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "object") {
            entry.filter(e=> isJsonFile(e.name)).forEach(e=> { if (!allJsonsMap[e.name]) allJsonsMap[e.name] = { name: e.name, url: e.url || e.raw_url || null, origin: rootFolder }; });
          }
        } else {
          const api = await (async ()=> { try { return await ghListApi(rootFolder); } catch(e){ return []; } })();
          (api || []).filter(i=> i.type !== "dir" && isJsonFile(i.name)).forEach(i=> { if (!allJsonsMap[i.name]) allJsonsMap[i.name] = { name: i.name, url: i.download_url || (`https://cdn.jsdelivr.net/gh/${getActiveRepo().owner}/${getActiveRepo().repo}@${getActiveRepo().branch}/${i.path}`), origin: rootFolder }; });
        }
      } catch(e){}

      window.gdjsCustomAudio[rootFolder] = window.gdjsCustomAudio[rootFolder] || { audios: {}, rawFiles: {} };
      const dest = window.gdjsCustomAudio[rootFolder];

      let nextChannelIndex = 0;
      for (const f of (audioFiles || [])) {
        if (ctrl.signal.aborted) throw new Error("aborted");
        try {
          showDownloadOverlay(`Baixando áudio: ${f.name} ...`);
          const blob = await fetchAsBlob(f.url, ctrl.signal);
          const blobUrl = URL.createObjectURL(blob);

          const audioEl = new Audio();
          audioEl.preload = "auto";
          audioEl.crossOrigin = "anonymous";
          audioEl.loop = false;

          try { audioEl.src = blobUrl; } catch(e){}
          try { audioEl.pause(); } catch(e){}
          try { audioEl.currentTime = 0; } catch(e){}

          dest.audios[f.name] = { blobUrl, audioEl };
          window.gdjsChannels[nextChannelIndex] = audioEl;
          nextChannelIndex++;
          setVarString("SongName", setVarString || "" );
        } catch(e){
        }
        await sleep(0);
      }

      const ggvars = runtimeScene.getGame().getVariables();
      for (const key in allJsonsMap) {
        if (ctrl.signal.aborted) throw new Error("aborted");
        try {
          const j = allJsonsMap[key];
          showDownloadOverlay(`Baixando chart: ${j.name} ...`);
          const txt = await fetchAsText(j.url, ctrl.signal);
          const storeKey = (j.origin && j.origin !== rootFolder ? (j.origin.split("/").pop() + "/" + j.name) : j.name);
          dest.rawFiles[storeKey] = txt;
          const lname = j.name.toLowerCase();
          if (/metadata|meta/.test(lname)) ggvars.get("metadatajson").setString(txt);
          else if (/(bf|chartbf|chart_bf)/.test(lname)) ggvars.get("BfChartJsonLoader").setString(txt);
          else if (/(dad|opp|opponent)/.test(lname)) ggvars.get("OppChartJsonLoader").setString(txt);
          else {
            try {
              const parsed = JSON.parse(txt);
              if (parsed && parsed.notes) {
                if (!ggvars.get("BfChartJsonLoader").getAsString()) ggvars.get("BfChartJsonLoader").setString(txt);
                else if (!ggvars.get("OppChartJsonLoader").getAsString()) ggvars.get("OppChartJsonLoader").setString(txt);
                else if (!ggvars.get("metadatajson").getAsString()) ggvars.get("metadatajson").setString(txt);
              } else {
                if (!ggvars.get("metadatajson").getAsString()) ggvars.get("metadatajson").setString(txt);
              }
            } catch(e){
              if (!ggvars.get("metadatajson").getAsString()) ggvars.get("metadatajson").setString(txt);
            }
          }
        } catch(e){
        }
        await sleep(0);
      }

      attachEndedWatcherToChannel0();
      await ensureAudioContext();
      setVarNumber("jsmusicfinish", 0);

      setVarNumber("AllLoaded", 1);
      hideDownloadOverlay();

      return { ok:true };
    } catch(err){
      try { stopAndCleanupAll(true); } catch(e){}
      setVarNumber("AllLoaded", 0);
      hideDownloadOverlay();
      return { ok:false, reason: err && err.message ? err.message : String(err) };
    }
  }

  let lastSelected = getVarString("selectedTrackKey") || "";
  let currentDownloadController = null;
  let currentDownloadId = 0;

  async function startIfNeededOnStartup(){
    const sel = getVarString("selectedTrackKey") || "";
    if (sel && sel.trim()) {
      currentDownloadId++;
      const myId = currentDownloadId;
      if (currentDownloadController) { try{ currentDownloadController.abort(); }catch(e){} }
      currentDownloadController = new AbortController();
      downloadAndPrepareFolderFlexible(sel, currentDownloadController, {}).then(res=>{
        if (myId !== currentDownloadId) return;
      }).catch(()=>{});
      lastSelected = sel;
    }
  }
  startIfNeededOnStartup();

  (function pollLoop(){
    try {
      const cur = getVarString("selectedTrackKey") || "";
      if (cur !== lastSelected) {
        lastSelected = cur;
        try { if (currentDownloadController) currentDownloadController.abort(); } catch(e){}
        currentDownloadId++;
        const myId = currentDownloadId;
        currentDownloadController = new AbortController();

        if (!cur || !cur.trim()) {
          stopAndCleanupAll(true);
          setVarNumber("AllLoaded", 1);
        } else {
          (async ()=>{
            setVarNumber("AllLoaded", 0);
            setVarNumber("jsmusicfinish", 0);
            try { setVarString("SongName", basenameNoExt((cur.split("/").pop()||cur))); } catch(e){}
            await downloadAndPrepareFolderFlexible(cur, currentDownloadController, {});
            if (myId === currentDownloadId) {
            }
          })().catch(()=>{});
        }
      }
    } catch(e){}
    requestAnimationFrame(pollLoop);
  })();

  (function rafLoop(){
    try {
      const ch0 = window.gdjsChannels && window.gdjsChannels[0];
      if (ch0) { const cur = ch0.currentTime || 0; setVarNumber("jsmusicoffset", cur); }
      const pauseVal = Number(getVarNumber("Pause") || 0);
      if (pauseVal) {
        Object.keys(window.gdjsChannels||{}).forEach(k=>{ try { const a = window.gdjsChannels[k]; if (a && !a.paused && !a.ended) a.pause(); } catch(e){} });
      } else {
      }
    } catch(e){}
    requestAnimationFrame(rafLoop);
  })();

  // removed pointerdown priming/unlock so downloads never trigger sound

})(runtimeScene);

};
gdjs.PlayonlineCode.eventsList0 = function(runtimeScene) {

{


gdjs.PlayonlineCode.userFunc0x16e5800(runtimeScene);

}


};gdjs.PlayonlineCode.eventsList1 = function(runtimeScene) {

{


let isConditionTrue_0 = false;
isConditionTrue_0 = false;
isConditionTrue_0 = !(gdjs.multiplayer.isCurrentPlayerHost());
if (isConditionTrue_0) {
gdjs.copyArray(runtimeScene.getObjects("Start"), gdjs.PlayonlineCode.GDStartObjects1);
{for(var i = 0, len = gdjs.PlayonlineCode.GDStartObjects1.length ;i < len;++i) {
    gdjs.PlayonlineCode.GDStartObjects1[i].deleteFromScene(runtimeScene);
}
}

{ //Subevents
gdjs.PlayonlineCode.eventsList0(runtimeScene);} //End of subevents
}

}


};gdjs.PlayonlineCode.eventsList2 = function(runtimeScene) {

{


let isConditionTrue_0 = false;
isConditionTrue_0 = false;
isConditionTrue_0 = gdjs.playerAuthentication.isAuthenticated();
if (isConditionTrue_0) {
{gdjs.multiplayer.openLobbiesWindow(runtimeScene);
}
}

}


{


let isConditionTrue_0 = false;
isConditionTrue_0 = false;
isConditionTrue_0 = !(gdjs.playerAuthentication.isAuthenticated());
if (isConditionTrue_0) {
{gdjs.playerAuthentication.openAuthenticationWindow(runtimeScene);
}
}

}


};gdjs.PlayonlineCode.eventsList3 = function(runtimeScene) {

{


let isConditionTrue_0 = false;
isConditionTrue_0 = false;
isConditionTrue_0 = !(gdjs.multiplayer.isCurrentPlayerHost());
if (isConditionTrue_0) {
gdjs.copyArray(runtimeScene.getObjects("selesongtext"), gdjs.PlayonlineCode.GDselesongtextObjects2);
{for(var i = 0, len = gdjs.PlayonlineCode.GDselesongtextObjects2.length ;i < len;++i) {
    gdjs.PlayonlineCode.GDselesongtextObjects2[i].deleteFromScene(runtimeScene);
}
}
}

}


{


let isConditionTrue_0 = false;
{
{gdjs.evtTools.camera.setCameraX(runtimeScene, gdjs.evtTools.camera.getCameraX(runtimeScene, "", 0) + (2220), "", 0);
}
{runtimeScene.getGame().getVariables().getFromIndex(56).getChild(2).setString("NoBotplay");
}
{gdjs.evtTools.storage.writeStringInJSONFile("Modifiers", "Botplay", "NoBotplay");
}
{runtimeScene.getGame().getVariables().getFromIndex(56).getChild(3).setString("NoMissesChallenge");
}
{gdjs.evtTools.storage.writeStringInJSONFile("Modifiers", "MissChallenge", "NoMissChallenge");
}
}

}


};gdjs.PlayonlineCode.userFunc0x18cebf0 = function GDJSInlineCode(runtimeScene) {
"use strict";
// SCRIPT A — compatibilidade: procura áudio na difficulty -> song folder -> mod folder (fallback)
(function () {
  const GITHUB_OWNER = "LucyYuih";
  const GITHUB_REPO = "gdev-custom-charts";
  const GITHUB_BRANCH = "main";
  const MANIFEST_CDN_URL = `https://cdn.jsdelivr.net/gh/${GITHUB_OWNER}/${GITHUB_REPO}@${GITHUB_BRANCH}/manifest.json`;

  if (document.getElementById("gdjs-mod-list-ui-final")) return;
  window._gdjs_manifest = window._gdjs_manifest || undefined;

  function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }
  function isAudioFile(name){ return /\.(mp3|ogg|wav|aac|m4a)$/i.test(name); }
  function isJsonFile(name){ return /\.json$/i.test(name); }
  function basenameNoExt(p){ if(!p) return ""; const s = p.split("/").pop(); return s.replace(/\.[^.]+$/, ""); }

  // stop + cleanup util
  function stopAndCleanupPrevious(options){
    options = options || {};
    const revokeBlobUrls = options.revokeBlobUrls === true;
    try {
      if (window.gdjsChannels) {
        Object.keys(window.gdjsChannels).forEach(k=>{
          try {
            const a = window.gdjsChannels[k];
            if (!a) return;
            try { a.pause(); } catch(e){}
            try { a.currentTime = 0; } catch(e){}
            if (a._gdjs_ended_handler) { try { a.removeEventListener('ended', a._gdjs_ended_handler); } catch(e){} a._gdjs_ended_handler = null; }
            try { if (revokeBlobUrls && a.src && a.src.startsWith('blob:')) URL.revokeObjectURL(a.src); } catch(e){}
          } catch(e){}
        });
      }

      if (window.gdjsCustomAudio) {
        Object.keys(window.gdjsCustomAudio).forEach(folder=>{
          try {
            const entry = window.gdjsCustomAudio[folder] || {};
            const audios = entry.audios || {};
            Object.keys(audios).forEach(name=>{
              try {
                const info = audios[name] || {};
                if (info && info.blobUrl && revokeBlobUrls) {
                  try { URL.revokeObjectURL(info.blobUrl); } catch(e){}
                }
              } catch(e){}
            });
            try { delete window.gdjsCustomAudio[folder]; } catch(e){}
          } catch(e){}
        });
      }

      window.gdjsChannels = {};
    } catch(e){}
  }

  // ---------- manifest & github helpers ----------
  async function tryManifestFromGameVar() {
    try {
      if (typeof runtimeScene !== "undefined" && runtimeScene.getGame) {
        const gg = runtimeScene.getGame().getVariables();
        if (gg.has("manifestjson")) {
          const s = gg.get("manifestjson").getAsString();
          if (s && s.trim()) {
            try { return JSON.parse(s); } catch(e) { return null; }
          }
        }
      }
    } catch(e){}
    return null;
  }

  async function tryManifestFromProjectResource() {
    try {
      if (typeof runtimeScene !== "undefined" && runtimeScene.getGame && runtimeScene.getGame().getResourcesManager) {
        const rm = runtimeScene.getGame().getResourcesManager();
        if (rm.getResourceFullUrl) {
          try {
            const url = rm.getResourceFullUrl("manifest.json");
            if (url) {
              const r = await fetch(url, {cache:"no-cache"});
              if (r.ok) return await r.json();
            }
          } catch(e){}
        }
      }
    } catch(e){}

    const tries = ["manifest.json","resources/manifest.json","res/manifest.json","./manifest.json"];
    for (const p of tries) {
      try { const r = await fetch(p, {cache:"no-cache"}); if (r.ok) { try { return await r.json(); } catch(e){} } } catch(e){}
    }
    return null;
  }

  async function tryManifestFromCDN() {
    try { const r = await fetch(MANIFEST_CDN_URL, {cache:"no-cache"}); if (r.ok) return await r.json(); } catch(e){} return null;
  }

  async function tryManifestFromGithubApi(path = "") {
    const apiUrl = `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${encodeURIComponent(path)}?ref=${GITHUB_BRANCH}`;
    let token = "";
    try { token = localStorage.getItem("gdjs_github_token") || ""; } catch(e){}
    try {
      if ((!token || token.trim()==="") && typeof runtimeScene !== "undefined" && runtimeScene.getGame) {
        const gg = runtimeScene.getGame().getVariables();
        if (gg.has("GitHubToken")) token = gg.get("GitHubToken").getAsString();
      }
    } catch(e){}
    const headers = token ? { "Authorization": "token " + token } : {};
    const r = await fetch(apiUrl, { headers });
    if (!r.ok) {
      if (r.status === 403) throw new Error("GitHub API: 403");
      throw new Error(`GitHub API: ${r.status}`);
    }
    return await r.json();
  }

  let _manifest_cache = undefined;
  async function loadManifestPreferLocal() {
    if (typeof _manifest_cache !== "undefined") return _manifest_cache;
    const a = await tryManifestFromGameVar(); if (a) { _manifest_cache = a; window._gdjs_manifest = _manifest_cache; return a; }
    const b = await tryManifestFromProjectResource(); if (b) { _manifest_cache = b; window._gdjs_manifest = _manifest_cache; return b; }
    const c = await tryManifestFromCDN(); if (c) { _manifest_cache = c; window._gdjs_manifest = _manifest_cache; return c; }
    _manifest_cache = null; window._gdjs_manifest = null; return null;
  }

  async function ghListForFolder(path="") {
    try {
      const api = await tryManifestFromGithubApi(path);
      return (api || []).map(item => ({ name: item.name, path: item.path, type: item.type, download_url: item.download_url || null }));
    } catch(e){ throw e; }
  }

  // ---------- novo: procura de arquivos de áudio com fallback ----------
  // tenta na difficultyPath -> songFolder (rootFolder) -> modFolder (pai de songFolder)
  async function findAudioFilesWithFallback(rootFolder, difficultyPath) {
    // rootFolder example: "modName/songName"
    // difficultyPath example: "modName/songName/hard"
    const manifest = await loadManifestPreferLocal();

    async function audioListFromManifestPath(p) {
      try {
        if (!manifest) return [];
        if (!manifest.hasOwnProperty(p)) return [];
        const entry = manifest[p];
        if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "object") {
          return entry.filter(e=> isAudioFile(e.name)).map(e=> ({ name: e.name, url: e.url || e.raw_url || null }));
        }
      } catch(e){}
      return [];
    }

    async function audioListFromGithubPath(p) {
      try {
        const api = await tryManifestFromGithubApi(p);
        return (api || []).filter(i => i.type !== "dir" && isAudioFile(i.name)).map(i => ({ name: i.name, url: i.download_url || (`https://cdn.jsdelivr.net/gh/${GITHUB_OWNER}/${GITHUB_REPO}@${GITHUB_BRANCH}/${i.path}`) }));
      } catch(e){}
      return [];
    }

    // 1) try difficultyPath
    try {
      let list = await audioListFromManifestPath(difficultyPath);
      if (list && list.length>0) return list;
      list = await audioListFromGithubPath(difficultyPath);
      if (list && list.length>0) return list;
    } catch(e){}

    // 2) try rootFolder (song folder)
    try {
      let list = await audioListFromManifestPath(rootFolder);
      if (list && list.length>0) return list;
      list = await audioListFromGithubPath(rootFolder);
      if (list && list.length>0) return list;
    } catch(e){}

    // 3) try modFolder (parent folder of rootFolder)
    try {
      const parts = (rootFolder || "").split("/").filter(Boolean);
      if (parts.length >= 2) {
        const modFolder = parts.slice(0, parts.length - 1).join("/");
        if (modFolder) {
          let list = await audioListFromManifestPath(modFolder);
          if (list && list.length>0) return list;
          list = await audioListFromGithubPath(modFolder);
          if (list && list.length>0) return list;
        }
      }
    } catch(e){}

    // nothing found
    return [];
  }

  // ---------- UI (mesma estrutura, sem mudar comportamento visual) ----------
  const container = document.createElement("div");
  container.id = "gdjs-mod-list-ui-final";
  Object.assign(container.style, {
    position: "fixed", right: "12px", top: "12px", width: "560px", height: "76vh",
    zIndex: 999999, fontFamily: "Inter, system-ui, Arial", color: "#eee",
    borderRadius: "10px", boxShadow: "0 12px 40px rgba(0,0,0,0.6)",
    overflow: "hidden", display: "flex", flexDirection: "column",
    background: "linear-gradient(180deg, rgba(18,18,18,0.98), rgba(14,14,14,0.95))"
  });
  const header = document.createElement("div");
  Object.assign(header.style, { padding: "10px", display: "flex", gap: "8px", alignItems: "center", borderBottom: "1px solid rgba(255,255,255,0.04)", flex: "0 0 auto" });
  header.innerHTML = `
    <div style="display:flex;gap:8px;align-items:center">
      <button id="gdjs-final-back" style="padding:6px;border-radius:6px">Voltar</button>
      <button id="gdjs-final-refresh" style="padding:6px;border-radius:6px">Atualizar</button>
      <button id="gdjs-final-close" style="padding:6px;border-radius:6px">Fechar</button>
    </div>
    <input id="gdjs-final-search" placeholder="Pesquisar mods / músicas..." style="margin-left:8px;flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:#0b0b0b;color:#eee" />
  `;
  const listWrapper = document.createElement("div");
  Object.assign(listWrapper.style, { padding: "10px", overflowY: "auto", flex: "1 1 auto", minHeight: 0 });
  const footer = document.createElement("div");
  Object.assign(footer.style, { padding: "10px", borderTop: "1px solid rgba(255,255,255,0.04)", display: "flex", flexDirection: "column", gap: "6px", flex: "0 0 auto" });
  footer.innerHTML = `<div id="gdjs-final-status" style="font-size:13px;opacity:0.9;height:18px"></div><div style="display:flex;gap:8px;align-items:center"><div style="font-size:13px">Último baixado:</div><div id="gdjs-final-last" style="flex:1;text-align:right;font-size:13px;opacity:0.85"></div></div><div style="display:flex;gap:8px;align-items:center"><div style="font-size:13px">Progresso:</div><div id="gdjs-final-progress" style="flex:1;text-align:right;font-size:13px;opacity:0.85"></div></div>`;
  container.appendChild(header); container.appendChild(listWrapper); container.appendChild(footer);
  document.body.appendChild(container);

  const btnBack = document.getElementById("gdjs-final-back"), btnRefresh = document.getElementById("gdjs-final-refresh"), btnClose = document.getElementById("gdjs-final-close"), searchInput = document.getElementById("gdjs-final-search");
  const statusEl = document.getElementById("gdjs-final-status"), lastEl = document.getElementById("gdjs-final-last"), progressEl = document.getElementById("gdjs-final-progress");

  function setStatus(s){ statusEl.textContent = s || ""; }
  function setLast(s){ lastEl.textContent = s || ""; }
  function setProg(s){ progressEl.textContent = s || ""; }

  // state
  let currentPath = "";
  let currentItems = [];
  const pathHistory = [];
  const hasSubdirsCache = {};
  let elementMapForPath = {};
  let backgroundCheckerAbort = null;

  function renderList(items) {
    listWrapper.innerHTML = "";
    elementMapForPath = {};
    if (!items || items.length === 0) { const e = document.createElement("div"); e.textContent = "Nenhuma pasta nesta pasta."; e.style.opacity = "0.8"; listWrapper.appendChild(e); return; }
    for (const item of items) {
      const row = document.createElement("div");
      Object.assign(row.style, { padding: "10px", borderRadius: "8px", display: "flex", justifyContent: "space-between", alignItems: "center", gap: "8px", marginBottom: "8px", background: "linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005))" });
      const left = document.createElement("div"); left.style.display = "flex"; left.style.flexDirection = "column"; left.innerHTML = `<div style="font-weight:600">${item.name}</div>`;
      const right = document.createElement("div"); right.style.display = "flex"; right.style.gap = "8px";
      const placeholderBtn = document.createElement("button"); placeholderBtn.textContent = "Checando..."; placeholderBtn.disabled = true; placeholderBtn.style.padding = "6px"; placeholderBtn.style.borderRadius = "6px";
      right.appendChild(placeholderBtn); row.appendChild(left); row.appendChild(right); listWrapper.appendChild(row);
      elementMapForPath[item.path] = { rightContainer: right, placeholderBtn, name: item.name };
    }
  }

  function startBackgroundCheck(items) {
    if (backgroundCheckerAbort && typeof backgroundCheckerAbort.abort === "function") { try{ backgroundCheckerAbort.abort(); }catch(e){} }
    const controller = { aborted:false, abort(){ this.aborted=true; } }; backgroundCheckerAbort = controller;
    const paths = (items||[]).map(i=>i.path);
    if (paths.length === 0) return;
    const concurrency = 3; let idx = 0;
    async function worker(){
      while(!controller.aborted){
        if (idx >= paths.length) break;
        const p = paths[idx++];
        try {
          if (typeof hasSubdirsCache[p] !== "undefined") { updateButtonsForDecisionFromCache(p, hasSubdirsCache[p]); await sleep(0); continue; }
          const manifest = await loadManifestPreferLocal();
          if (manifest && manifest.hasOwnProperty(p)) {
            const entry = manifest[p];
            if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "string") { hasSubdirsCache[p] = true; updateButtonsForDecisionFromCache(p,true); await sleep(0); continue; }
            if (Array.isArray(entry) && entry.length>=0 && typeof entry[0] === "object") { hasSubdirsCache[p] = false; updateButtonsForDecisionFromCache(p,false); await sleep(0); continue; }
          }
          try {
            const apiList = await tryManifestFromGithubApi(p);
            const hasDir = Array.isArray(apiList) && apiList.some(x=>x.type==="dir");
            hasSubdirsCache[p] = Boolean(hasDir);
            updateButtonsForDecisionFromCache(p, Boolean(hasDir));
          } catch(e) {
            const msg = (e && e.message) ? e.message : "";
            if (msg.includes("403")) setStatus("GitHub 403 — cole um Personal Access Token via console ou variável do jogo.");
            hasSubdirsCache[p] = false;
            updateButtonsForDecisionFromCache(p, false);
          }
        } catch(e){}
        await sleep(40);
      }
    }
    for (let i=0;i<concurrency;i++) worker();
  }

  async function fetchSubdirs(folderPath) {
    try {
      const manifest = await loadManifestPreferLocal();
      if (manifest && manifest.hasOwnProperty(folderPath)) {
        const entry = manifest[folderPath];
        if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "string") return entry.slice();
      }
    } catch(e){}
    try {
      const api = await ghListForFolder(folderPath);
      const dirs = (api || []).filter(i=> i.type === "dir").map(i=> i.name);
      return dirs;
    } catch(e){}
    return [];
  }

  // modal: only list difficulties (no raiz, no baixar todas)
  function showDifficultyChooser(rootFolder, subdirs) {
    const overlay = document.createElement("div");
    Object.assign(overlay.style, { position: "fixed", left: "0", top: "0", right: "0", bottom: "0", background: "rgba(0,0,0,0.6)", zIndex: 1000000, display: "flex", alignItems: "center", justifyContent: "center" });
    const box = document.createElement("div");
    Object.assign(box.style, { width: "420px", maxHeight: "70vh", overflowY: "auto", background: "#0f0f10", borderRadius: "8px", padding: "12px", boxShadow: "0 12px 40px rgba(0,0,0,0.6)", color: "#eee" });
    box.innerHTML = `<div style="font-weight:700;margin-bottom:8px">Escolha uma difficulty para:</div><div style="margin-bottom:8px;color:#bbb">${rootFolder}</div>`;
    const list = document.createElement("div"); list.style.display = "flex"; list.style.flexDirection = "column"; list.style.gap = "6px";
    for (const d of subdirs) {
      const b = document.createElement("button");
      b.textContent = d;
      b.style.padding="8px"; b.style.borderRadius="6px";
      b.onclick = ()=> { overlay.remove(); downloadDifficultyKeepAudioRoot(rootFolder, d); };
      list.appendChild(b);
    }
    const cancel = document.createElement("button"); cancel.textContent = "Cancelar"; cancel.style.marginTop="10px"; cancel.style.padding="8px"; cancel.style.borderRadius="6px";
    cancel.onclick = ()=> overlay.remove();
    box.appendChild(list); box.appendChild(cancel);
    overlay.appendChild(box);
    document.body.appendChild(overlay);
  }

  // update per-item buttons:
  function updateButtonsForDecisionFromCache(path, hasSubdirs) {
    const el = elementMapForPath[path];
    if (!el) return;
    const right = el.rightContainer; right.innerHTML = "";
    const itemName = el.name || path.split("/").pop();

    if (hasSubdirs) {
      if (!currentPath || currentPath === "") {
        // root listing: item is a mod folder
        const openBtn = document.createElement("button"); openBtn.textContent = "Abrir"; openBtn.style.padding="6px"; openBtn.style.borderRadius="6px"; openBtn.onclick = ()=> openFolder(path);
        right.appendChild(openBtn);
      } else {
        // inside mod: item is a song with difficulties -> show only select difficulty
        const pickBtn = document.createElement("button"); pickBtn.textContent = "Selecionar difficulty"; pickBtn.style.padding="6px"; pickBtn.style.borderRadius="6px";
        pickBtn.onclick = async ()=>{
          try {
            setStatus("Carregando difficulties de " + itemName + "...");
            const subdirs = await fetchSubdirs(path);
            if (!subdirs || subdirs.length === 0) { setStatus("Nenhuma difficulty encontrada."); return; }
            showDifficultyChooser(path, subdirs);
            setStatus("");
          } catch(e){ setStatus("Erro listando difficulties."); }
        };
        right.appendChild(pickBtn);
      }
    } else {
      // leaf song (no subdirs) -> selectable and downloadable directly
      const dlBtn = document.createElement("button"); dlBtn.textContent = "Selecionar e baixar"; dlBtn.style.padding="6px"; dlBtn.style.borderRadius="6px"; dlBtn.onclick = ()=> downloadSongFolder(path);
      right.appendChild(dlBtn);
    }
  }

  // load folder (directories)
  async function loadFolder(path="") {
    try {
      setStatus("Carregando pasta...");
      if (backgroundCheckerAbort && typeof backgroundCheckerAbort.abort === "function") { try { backgroundCheckerAbort.abort(); } catch(e){} }
      const items = await (async ()=>{
        const manifest = await loadManifestPreferLocal();
        if (manifest && manifest.hasOwnProperty(path)) {
          const entry = manifest[path];
          if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "string") {
            return entry.map(name => ({ name, path: (path? path + "/" + name : name), type: "dir" }));
          }
        }
        try {
          const api = await ghListForFolder(path);
          return (api || []).filter(it => it.type === "dir").map(it => ({ name: it.name, path: it.path, type: "dir" }));
        } catch(e){
          return [];
        }
      })();
      currentItems = items || [];
      currentPath = path || "";
      for (const d of currentItems) delete hasSubdirsCache[d.path];
      renderList(currentItems);
      setStatus((currentPath || "Mods") + ` — ${currentItems.length} pastas`);
      setTimeout(()=> startBackgroundCheck(currentItems), 10);
    } catch (err) {
      currentItems = []; renderList(currentItems);
      setStatus("Erro carregando pasta: " + (err && err.message ? err.message : err));
    }
  }

  async function openFolder(path) { if (currentPath !== path) pathHistory.push(currentPath); await loadFolder(path); }

  btnBack.onclick = async ()=> { if (pathHistory.length === 0) { await loadFolder(""); return; } const prev = pathHistory.pop(); await loadFolder(prev || ""); };
  btnRefresh.onclick = async ()=> {
    try { setStatus("Atualizando..."); } catch(e){}
    try { const items = currentItems||[]; for (const it of items) delete hasSubdirsCache[it.path]; } catch(e){}
    try { _manifest_cache = undefined; } catch(e){}
    try { window._gdjs_manifest = undefined; delete window._gdjs_manifest; } catch(e){}
    try { await sleep(30); } catch(e){}
    await loadFolder(currentPath||"");
  };
  btnClose.onclick = ()=> container.remove();
  searchInput.addEventListener("input", ()=> { const q = searchInput.value.trim().toLowerCase(); if (!q) { renderList(currentItems); setStatus((currentPath||"Mods")+` — ${currentItems.length} pastas`); setTimeout(()=> startBackgroundCheck(currentItems), 10); return; } const filtered = currentItems.filter(it => it.name.toLowerCase().includes(q)); renderList(filtered); setStatus(`Resultado: ${filtered.length} / ${currentItems.length}`); setTimeout(()=> startBackgroundCheck(filtered), 10); });

  // downloader helpers
  window.gdjsCustomAudio = window.gdjsCustomAudio || {};
  window.gdjsChannels = window.gdjsChannels || {};

  // download JSONs for chosen difficulty, audios with fallback
  async function downloadDifficultyKeepAudioRoot(rootFolder, difficultyName) {
    const difficultyPath = (rootFolder? rootFolder + "/" + difficultyName : difficultyName);
    try { btnClose.disabled = true; } catch(e){}
    try {
      stopAndCleanupPrevious({ revokeBlobUrls: true });

      // mark selected track
      try { runtimeScene.getGame().getVariables().get("selectedTrackKey").setString(rootFolder); } catch(e){}
      try { runtimeScene.getGame().getVariables().get("SongName").setString(basenameNoExt(rootFolder.split("/").pop()||rootFolder)); } catch(e){}

      setStatus("Listando arquivos (procura áudios: difficulty -> song -> mod)...");
      // usa fallback novo
      const audioFiles = await findAudioFilesWithFallback(rootFolder, difficultyPath);

      // charts: from difficultyPath
      let chartFiles = [];
      const manifest = await loadManifestPreferLocal();
      if (manifest && manifest.hasOwnProperty(difficultyPath)) {
        const entry = manifest[difficultyPath];
        if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "object") {
          chartFiles = entry.filter(e => isJsonFile(e.name)).map(e => ({ name: e.name, url: e.url || e.raw_url || null }) );
        }
      } else {
        try {
          const api = await ghListForFolder(difficultyPath);
          chartFiles = (api || []).filter(i => i.type !== "dir" && isJsonFile(i.name)).map(i => ({ name: i.name, url: i.download_url || (`https://cdn.jsdelivr.net/gh/${GITHUB_OWNER}/${GITHUB_REPO}@${GITHUB_BRANCH}/${i.path}`) }));
        } catch(e){}
      }

      // also include any jsons that might exist in rootFolder (fallback)
      let rootJsons = [];
      if (manifest && manifest.hasOwnProperty(rootFolder)) {
        const entry = manifest[rootFolder];
        if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "object") {
          rootJsons = entry.filter(e => isJsonFile(e.name)).map(e => ({ name: e.name, url: e.url || e.raw_url || null }) );
        }
      } else {
        try {
          const api = await ghListForFolder(rootFolder);
          rootJsons = (api || []).filter(i => i.type !== "dir" && isJsonFile(i.name)).map(i => ({ name: i.name, url: i.download_url || (`https://cdn.jsdelivr.net/gh/${GITHUB_OWNER}/${GITHUB_REPO}@${GITHUB_BRANCH}/${i.path}`) }));
        } catch(e){}
      }

      // merge jsons, difficulty ones override root ones
      const allJsonsMap = {};
      rootJsons.forEach(j => { allJsonsMap[j.name] = j; });
      chartFiles.forEach(j => { allJsonsMap[j.name] = j; });

      // prepare storage under rootFolder key
      window.gdjsCustomAudio[rootFolder] = window.gdjsCustomAudio[rootFolder] || { audios: {}, rawFiles: {} };
      const dest = window.gdjsCustomAudio[rootFolder];

      // download audios (from whichever source the fallback returned)
      let nextChannelIndex = 0;
      const unlockQueue = [];
      for (const f of (audioFiles || [])) {
        try {
          setStatus("Baixando áudio: " + f.name + "...");
          const resp = await fetch(f.url);
          if (!resp.ok) continue;
          const blob = await resp.blob();
          const blobUrl = URL.createObjectURL(blob);
          const audioEl = new Audio(blobUrl);
          audioEl.preload = "auto"; audioEl.crossOrigin = "anonymous"; audioEl.loop = false;
          dest.audios[f.name] = { blobUrl, audioEl };
          window.gdjsChannels[nextChannelIndex] = audioEl;
          nextChannelIndex++;
          try {
            const p = audioEl.play();
            if (p && typeof p.then === "function") {
              p.then(()=>{ try{ audioEl.pause(); audioEl.currentTime = 0; } catch(e){} }).catch(()=>{ unlockQueue.push({audioEl, name: f.name}); });
            } else { try{ audioEl.pause(); audioEl.currentTime = 0; } catch(e){} }
          } catch(e){ unlockQueue.push({audioEl, name: f.name}); }
          setLast(f.name);
        } catch(e){}
        await sleep(0);
      }

      // download jsons (from difficulty primarily)
      for (const name in allJsonsMap) {
        try {
          const j = allJsonsMap[name];
          setStatus("Baixando chart: " + name + "...");
          const r = await fetch(j.url);
          if (!r.ok) continue;
          const txt = await r.text();
          // store under key indicating difficulty origin
          const key = difficultyName + "/" + name;
          dest.rawFiles[key] = txt;
          const lname = name.toLowerCase();
          const gg = runtimeScene.getGame().getVariables();
          if (/metadata|meta/.test(lname)) gg.get("metadatajson").setString(txt);
          else if (/(bf|chartbf|chart_bf)/.test(lname)) gg.get("BfChartJsonLoader").setString(txt);
          else if (/(dad|opp|opponent)/.test(lname)) gg.get("OppChartJsonLoader").setString(txt);
          else {
            try {
              const parsed = JSON.parse(txt);
              if (parsed && parsed.notes) {
                if (!gg.get("BfChartJsonLoader").getAsString()) gg.get("BfChartJsonLoader").setString(txt);
                else if (!gg.get("OppChartJsonLoader").getAsString()) gg.get("OppChartJsonLoader").setString(txt);
                else if (!gg.get("metadatajson").getAsString()) gg.get("metadatajson").setString(txt);
              } else {
                if (!gg.get("metadatajson").getAsString()) gg.get("metadatajson").setString(txt);
              }
            } catch(e){
              if (!gg.get("metadatajson").getAsString()) gg.get("metadatajson").setString(txt);
            }
          }
          setLast(name);
        } catch(e){}
        await sleep(0);
      }

      // unlock on gesture if needed
      if (unlockQueue.length > 0) {
        const unlock = async () => { for (const it of unlockQueue) { try { await it.audioEl.play(); it.audioEl.pause(); it.audioEl.currentTime = 0; } catch(e){} } window.removeEventListener('pointerdown', unlock); };
        window.addEventListener('pointerdown', unlock, { once: true });
      }

      setStatus('Download concluído para "' + rootFolder + '" (difficulty: ' + difficultyName + ').'); setProg("");
    } catch(e){
      setStatus("Erro ao baixar: " + (e && e.message ? e.message : e)); setProg("");
    } finally {
      try { btnClose.disabled = false; } catch(e){}
    }
  }

  // download all difficulties (áudios também usando fallback)
  async function downloadAllDifficulties(rootFolder, subdirs) {
    try { btnClose.disabled = true; } catch(e){}
    try {
      stopAndCleanupPrevious({ revokeBlobUrls: true });
      try { runtimeScene.getGame().getVariables().get("selectedTrackKey").setString(rootFolder); } catch(e){}
      try { runtimeScene.getGame().getVariables().get("SongName").setString(basenameNoExt(rootFolder.split("/").pop()||rootFolder)); } catch(e){}

      setStatus("Procurando áudios (difficulty -> song -> mod)...");
      // Try to find audios via fallback. We can pass the first difficulty path as a hint, but fallback will try root and mod as well.
      const hintDifficulty = (subdirs && subdirs.length>0) ? (rootFolder + "/" + subdirs[0]) : rootFolder;
      const audioFiles = await findAudioFilesWithFallback(rootFolder, hintDifficulty);

      window.gdjsCustomAudio[rootFolder] = window.gdjsCustomAudio[rootFolder] || { audios: {}, rawFiles: {} };
      const dest = window.gdjsCustomAudio[rootFolder];
      let nextChannelIndex = 0;
      const unlockQueue = [];
      for (const f of (audioFiles || [])) {
        try {
          setStatus("Baixando áudio: " + f.name + "...");
          const resp = await fetch(f.url);
          if (!resp.ok) continue;
          const blob = await resp.blob();
          const blobUrl = URL.createObjectURL(blob);
          const audioEl = new Audio(blobUrl);
          audioEl.preload = "auto"; audioEl.crossOrigin = "anonymous"; audioEl.loop = false;
          dest.audios[f.name] = { blobUrl, audioEl };
          window.gdjsChannels[nextChannelIndex] = audioEl;
          nextChannelIndex++;
          try {
            const p = audioEl.play();
            if (p && typeof p.then === "function") {
              p.then(()=>{ try{ audioEl.pause(); audioEl.currentTime = 0; } catch(e){} }).catch(()=>{ unlockQueue.push({audioEl, name: f.name}); });
            } else { try{ audioEl.pause(); audioEl.currentTime = 0; } catch(e){} }
          } catch(e){ unlockQueue.push({audioEl, name: f.name}); }
          setLast(f.name);
        } catch(e){}
        await sleep(0);
      }

      // then download all jsons from each subdir
      const manifest = await loadManifestPreferLocal();
      for (const d of subdirs) {
        try {
          setStatus("Baixando charts: " + d + " ...");
          let chartFiles = [];
          const difficultyPath = (rootFolder? rootFolder + "/" + d : d);
          if (manifest && manifest.hasOwnProperty(difficultyPath)) {
            const entry = manifest[difficultyPath];
            if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "object") {
              chartFiles = entry.filter(e => isJsonFile(e.name)).map(e => ({ name: e.name, url: e.url || e.raw_url || null }) );
            }
          } else {
            try {
              const api = await ghListForFolder(difficultyPath);
              chartFiles = (api || []).filter(i => i.type !== "dir" && isJsonFile(i.name)).map(i => ({ name: i.name, url: i.download_url || (`https://cdn.jsdelivr.net/gh/${GITHUB_OWNER}/${GITHUB_REPO}@${GITHUB_BRANCH}/${i.path}`) }));
            } catch(e){}
          }
          for (const j of chartFiles) {
            try {
              const r = await fetch(j.url);
              if (!r.ok) continue;
              const txt = await r.text();
              const key = d + "/" + j.name;
              dest.rawFiles[key] = txt;
              const lname = j.name.toLowerCase();
              const gg = runtimeScene.getGame().getVariables();
              if (/metadata|meta/.test(lname)) gg.get("metadatajson").setString(txt);
              else if (/(bf|chartbf|chart_bf)/.test(lname)) gg.get("BfChartJsonLoader").setString(txt);
              else if (/(dad|opp|opponent)/.test(lname)) gg.get("OppChartJsonLoader").setString(txt);
              else {
                try {
                  const parsed = JSON.parse(txt);
                  if (parsed && parsed.notes) {
                    if (!gg.get("BfChartJsonLoader").getAsString()) gg.get("BfChartJsonLoader").setString(txt);
                    else if (!gg.get("OppChartJsonLoader").getAsString()) gg.get("OppChartJsonLoader").setString(txt);
                    else if (!gg.get("metadatajson").getAsString()) gg.get("metadatajson").setString(txt);
                  } else {
                    if (!gg.get("metadatajson").getAsString()) gg.get("metadatajson").setString(txt);
                  }
                } catch(e){
                  if (!gg.get("metadatajson").getAsString()) gg.get("metadatajson").setString(txt);
                }
              }
              setLast(j.name);
            } catch(e){}
            await sleep(0);
          }
        } catch(e){}
      }

      if (unlockQueue.length > 0) {
        const unlock = async () => { for (const it of unlockQueue) { try { await it.audioEl.play(); it.audioEl.pause(); it.audioEl.currentTime = 0; } catch(e){} } window.removeEventListener('pointerdown', unlock); };
        window.addEventListener('pointerdown', unlock, { once: true });
      }

      setStatus('Download concluído para "' + rootFolder + '" (todas difficulties).'); setProg("");
    } catch(e){
      setStatus("Erro ao baixar: " + (e && e.message ? e.message : e)); setProg("");
    } finally {
      try { btnClose.disabled = false; } catch(e){}
    }
  }

  // standard leaf download (sem mudanças)
  async function downloadSongFolder(folderPath) {
    try { btnClose.disabled = true; } catch(e){}
    try {
      stopAndCleanupPrevious({ revokeBlobUrls: true });

      setStatus("Listando arquivos em " + folderPath + "...");
      const manifest = await loadManifestPreferLocal();
      let files = null;
      if (manifest && manifest.hasOwnProperty(folderPath)) {
        const entry = manifest[folderPath];
        if (Array.isArray(entry) && entry.length>0 && typeof entry[0] === "object") {
          files = entry.map(e => ({ name: e.name, url: e.url || e.raw_url || null, type: e.type || "file" }));
        } else {
          files = [];
        }
      } else {
        try {
          const apiList = await ghListForFolder(folderPath);
          files = (apiList || []).map(i => ({ name: i.name, url: i.download_url || (`https://cdn.jsdelivr.net/gh/${GITHUB_OWNER}/${GITHUB_REPO}@${GITHUB_BRANCH}/${i.path}`), type: i.type }));
          files = files.filter(x => x.type !== "dir");
        } catch(e){
          files = [];
        }
      }

      if (!Array.isArray(files) || files.length === 0) { setStatus("Pasta vazia."); return; }

      window.gdjsCustomAudio[folderPath] = window.gdjsCustomAudio[folderPath] || {audios:{}, rawFiles:{}};
      const dest = window.gdjsCustomAudio[folderPath];

      try { runtimeScene.getGame().getVariables().get("selectedTrackKey").setString(folderPath); } catch(e){}
      try { runtimeScene.getGame().getVariables().get("SongName").setString(basenameNoExt(folderPath.split("/").pop()||folderPath)); } catch(e){}

      const totalFiles = files.length;
      let processed = 0;
      let nextChannelIndex = (window.gdjsChannels) ? Object.keys(window.gdjsChannels).length : 0;
      const unlockQueue = [];

      for (const f of files) {
        processed++; setProg(`${processed} / ${totalFiles}`);
        const fname = f.name || ("file" + processed);
        const url = f.url || f.download_url || null;
        if (!url) continue;

        if (isJsonFile(fname)) {
          try {
            const txtResp = await fetch(url);
            if (txtResp.ok) {
              const txt = await txtResp.text();
              dest.rawFiles[fname] = txt;
              const lname = fname.toLowerCase();
              const gg = runtimeScene.getGame().getVariables();
              if (/metadata|meta/.test(lname)) gg.get("metadatajson").setString(txt);
              else if (/(bf|chartbf|chart_bf)/.test(lname)) gg.get("BfChartJsonLoader").setString(txt);
              else if (/(dad|opp|opponent)/.test(lname)) gg.get("OppChartJsonLoader").setString(txt);
              else {
                try {
                  const parsed = JSON.parse(txt);
                  if (parsed && parsed.notes) {
                    if (!gg.get("BfChartJsonLoader").getAsString()) gg.get("BfChartJsonLoader").setString(txt);
                    else if (!gg.get("OppChartJsonLoader").getAsString()) gg.get("OppChartJsonLoader").setString(txt);
                    else if (!gg.get("metadatajson").getAsString()) gg.get("metadatajson").setString(txt);
                  } else {
                    if (!gg.get("metadatajson").getAsString()) gg.get("metadatajson").setString(txt);
                  }
                } catch(e) {
                  if (!gg.get("metadatajson").getAsString()) gg.get("metadatajson").setString(txt);
                }
              }
              setLast(fname);
            }
          } catch(e){}
        } else if (isAudioFile(fname)) {
          try {
            setStatus("Baixando áudio: " + fname + "...");
            const resp = await fetch(url);
            if (!resp.ok) continue;
            const blob = await resp.blob();
            const blobUrl = URL.createObjectURL(blob);
            const audioEl = new Audio(blobUrl);
            audioEl.preload = "auto"; audioEl.crossOrigin = "anonymous"; audioEl.loop = false;
            dest.audios[fname] = { blobUrl, audioEl, audioElRef: audioEl };
            window.gdjsChannels = window.gdjsChannels || {};
            window.gdjsChannels[nextChannelIndex] = audioEl;
            nextChannelIndex++;
            try {
              const p = audioEl.play();
              if (p && typeof p.then === "function") {
                p.then(()=>{ try{ audioEl.pause(); audioEl.currentTime = 0; } catch(e){} }).catch(()=>{ unlockQueue.push({audioEl, name: fname}); });
              } else { try{ audioEl.pause(); audioEl.currentTime = 0; } catch(e){} }
            } catch(e){ unlockQueue.push({audioEl, name: fname}); }
            try { const gg = runtimeScene.getGame().getVariables(); if (!gg.get("SongName").getAsString()) gg.get("SongName").setString(basenameNoExt(fname)); } catch(e){}
            setLast(fname);
          } catch(e){}
        }
        await sleep(0);
      }

      if (unlockQueue.length > 0) {
        const unlock = async () => { for (const it of unlockQueue) { try { await it.audioEl.play(); it.audioEl.pause(); it.audioEl.currentTime = 0; } catch(e){} } window.removeEventListener('pointerdown', unlock); };
        window.addEventListener('pointerdown', unlock, { once: true });
      }

      setStatus('Download concluído para "' + folderPath + '".'); setProg("");
    } catch(e){
      setStatus("Erro ao baixar pasta: " + (e && e.message ? e.message : e)); setProg("");
    } finally {
      try { btnClose.disabled = false; } catch(e){}
    }
  }

  // initial load
  loadFolder("");

})();

};
gdjs.PlayonlineCode.eventsList4 = function(runtimeScene) {

{


gdjs.PlayonlineCode.userFunc0x18cebf0(runtimeScene);

}


};gdjs.PlayonlineCode.mapOfGDgdjs_9546PlayonlineCode_9546GDStartObjects1Objects = Hashtable.newFrom({"Start": gdjs.PlayonlineCode.GDStartObjects1});
gdjs.PlayonlineCode.eventsList5 = function(runtimeScene) {

{


let isConditionTrue_0 = false;
isConditionTrue_0 = false;
isConditionTrue_0 = gdjs.evtTools.runtimeScene.sceneJustBegins(runtimeScene);
if (isConditionTrue_0) {
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(21));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(22));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(23));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(24));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(25));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(26));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(27));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(28));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(19));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(53));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(51));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(82).getChild("BestScore"));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(82).getChild("SongsBestScore"));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(82).getChild("Points"));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(82).getChild("PointsMessage"));
}
{gdjs.multiplayerVariablesManager.disableVariableSynchronization(runtimeScene, runtimeScene.getGame().getVariables().getFromIndex(82).getChild("Pfcs"));
}
{gdjs.evtTools.runtimeScene.prioritizeLoadingOfScene(runtimeScene, "Play");
}
{runtimeScene.getGame().getVariables().getFromIndex(5).setNumber(1);
}

{ //Subevents
gdjs.PlayonlineCode.eventsList1(runtimeScene);} //End of subevents
}

}


{

gdjs.copyArray(runtimeScene.getObjects("Join"), gdjs.PlayonlineCode.GDJoinObjects1);

let isConditionTrue_0 = false;
isConditionTrue_0 = false;
for (var i = 0, k = 0, l = gdjs.PlayonlineCode.GDJoinObjects1.length;i<l;++i) {
    if ( gdjs.PlayonlineCode.GDJoinObjects1[i].IsClicked(null) ) {
        isConditionTrue_0 = true;
        gdjs.PlayonlineCode.GDJoinObjects1[k] = gdjs.PlayonlineCode.GDJoinObjects1[i];
        ++k;
    }
}
gdjs.PlayonlineCode.GDJoinObjects1.length = k;
if (isConditionTrue_0) {
isConditionTrue_0 = false;
{isConditionTrue_0 = runtimeScene.getOnceTriggers().triggerOnce(33119892);
}
}
if (isConditionTrue_0) {

{ //Subevents
gdjs.PlayonlineCode.eventsList2(runtimeScene);} //End of subevents
}

}


{


let isConditionTrue_0 = false;
isConditionTrue_0 = false;
isConditionTrue_0 = gdjs.multiplayer.isLobbyGameRunning();
if (isConditionTrue_0) {
isConditionTrue_0 = false;
isConditionTrue_0 = gdjs.multiplayer.isPlayerConnected(2);
if (isConditionTrue_0) {
isConditionTrue_0 = false;
{isConditionTrue_0 = runtimeScene.getOnceTriggers().triggerOnce(33117036);
}
}
}
if (isConditionTrue_0) {
gdjs.copyArray(runtimeScene.getObjects("Player1text"), gdjs.PlayonlineCode.GDPlayer1textObjects1);
gdjs.copyArray(runtimeScene.getObjects("Player2text"), gdjs.PlayonlineCode.GDPlayer2textObjects1);
{for(var i = 0, len = gdjs.PlayonlineCode.GDPlayer1textObjects1.length ;i < len;++i) {
    gdjs.PlayonlineCode.GDPlayer1textObjects1[i].getBehavior("Text").setText(gdjs.multiplayer.getPlayerUsername(1) + gdjs.evtTools.string.newLine() + "v");
}
}
{for(var i = 0, len = gdjs.PlayonlineCode.GDPlayer2textObjects1.length ;i < len;++i) {
    gdjs.PlayonlineCode.GDPlayer2textObjects1[i].getBehavior("Text").setText(gdjs.multiplayer.getPlayerUsername(2) + gdjs.evtTools.string.newLine() + "v");
}
}

{ //Subevents
gdjs.PlayonlineCode.eventsList3(runtimeScene);} //End of subevents
}

}


{


let isConditionTrue_0 = false;
isConditionTrue_0 = false;
isConditionTrue_0 = gdjs.multiplayer.isLobbyGameRunning();
if (isConditionTrue_0) {
isConditionTrue_0 = false;
isConditionTrue_0 = !(gdjs.multiplayer.isPlayerConnected(2));
}
if (isConditionTrue_0) {
{gdjs.multiplayer.endLobbyGame();
}
}

}


{

gdjs.copyArray(runtimeScene.getObjects("selesongtext"), gdjs.PlayonlineCode.GDselesongtextObjects1);

let isConditionTrue_0 = false;
isConditionTrue_0 = false;
for (var i = 0, k = 0, l = gdjs.PlayonlineCode.GDselesongtextObjects1.length;i<l;++i) {
    if ( gdjs.PlayonlineCode.GDselesongtextObjects1[i].getBehavior("ButtonFSM").IsClicked(null) ) {
        isConditionTrue_0 = true;
        gdjs.PlayonlineCode.GDselesongtextObjects1[k] = gdjs.PlayonlineCode.GDselesongtextObjects1[i];
        ++k;
    }
}
gdjs.PlayonlineCode.GDselesongtextObjects1.length = k;
if (isConditionTrue_0) {
isConditionTrue_0 = false;
{isConditionTrue_0 = runtimeScene.getOnceTriggers().triggerOnce(33129668);
}
}
if (isConditionTrue_0) {

{ //Subevents
gdjs.PlayonlineCode.eventsList4(runtimeScene);} //End of subevents
}

}


{



}


{


let isConditionTrue_0 = false;
isConditionTrue_0 = false;
isConditionTrue_0 = gdjs.multiplayer.isCurrentPlayerHost();
if (isConditionTrue_0) {
isConditionTrue_0 = false;
{isConditionTrue_0 = runtimeScene.getOnceTriggers().triggerOnce(33124492);
}
}
if (isConditionTrue_0) {
gdjs.PlayonlineCode.GDStartObjects1.length = 0;

{gdjs.evtTools.object.createObjectOnScene(runtimeScene, gdjs.PlayonlineCode.mapOfGDgdjs_9546PlayonlineCode_9546GDStartObjects1Objects, 3058, 651, "");
}
}

}


{


let isConditionTrue_0 = false;
{
gdjs.copyArray(runtimeScene.getObjects("songselectedtext"), gdjs.PlayonlineCode.GDsongselectedtextObjects1);
{for(var i = 0, len = gdjs.PlayonlineCode.GDsongselectedtextObjects1.length ;i < len;++i) {
    gdjs.PlayonlineCode.GDsongselectedtextObjects1[i].getBehavior("Text").setText("Song Selected: " + runtimeScene.getGame().getVariables().getFromIndex(4).getAsString());
}
}
}

}


{



}


{

gdjs.copyArray(runtimeScene.getObjects("Start"), gdjs.PlayonlineCode.GDStartObjects1);

let isConditionTrue_0 = false;
isConditionTrue_0 = false;
for (var i = 0, k = 0, l = gdjs.PlayonlineCode.GDStartObjects1.length;i<l;++i) {
    if ( gdjs.PlayonlineCode.GDStartObjects1[i].IsClicked(null) ) {
        isConditionTrue_0 = true;
        gdjs.PlayonlineCode.GDStartObjects1[k] = gdjs.PlayonlineCode.GDStartObjects1[i];
        ++k;
    }
}
gdjs.PlayonlineCode.GDStartObjects1.length = k;
if (isConditionTrue_0) {
isConditionTrue_0 = false;
{isConditionTrue_0 = (runtimeScene.getGame().getVariables().getFromIndex(4).getAsString() != "None");
}
}
if (isConditionTrue_0) {
{gdjs.evtTools.runtimeScene.replaceScene(runtimeScene, "Play", false);
}
}

}


{


let isConditionTrue_0 = false;
isConditionTrue_0 = false;
isConditionTrue_0 = gdjs.multiplayerMessageManager.hasAnyPlayerJustLeft();
if (isConditionTrue_0) {
isConditionTrue_0 = false;
isConditionTrue_0 = gdjs.evtTools.camera.getCameraX(runtimeScene, "", 0) == 2220 + 960;
}
if (isConditionTrue_0) {
{gdjs.evtTools.camera.setCameraX(runtimeScene, 960, "", 0);
}
}

}


};

gdjs.PlayonlineCode.func = function(runtimeScene) {
runtimeScene.getOnceTriggers().startNewFrame();

gdjs.PlayonlineCode.GDJoinObjects1.length = 0;
gdjs.PlayonlineCode.GDJoinObjects2.length = 0;
gdjs.PlayonlineCode.GDJoinObjects3.length = 0;
gdjs.PlayonlineCode.GDbackObjects1.length = 0;
gdjs.PlayonlineCode.GDbackObjects2.length = 0;
gdjs.PlayonlineCode.GDbackObjects3.length = 0;
gdjs.PlayonlineCode.GDBFObjects1.length = 0;
gdjs.PlayonlineCode.GDBFObjects2.length = 0;
gdjs.PlayonlineCode.GDBFObjects3.length = 0;
gdjs.PlayonlineCode.GDPlayer2textObjects1.length = 0;
gdjs.PlayonlineCode.GDPlayer2textObjects2.length = 0;
gdjs.PlayonlineCode.GDPlayer2textObjects3.length = 0;
gdjs.PlayonlineCode.GDPlayer1textObjects1.length = 0;
gdjs.PlayonlineCode.GDPlayer1textObjects2.length = 0;
gdjs.PlayonlineCode.GDPlayer1textObjects3.length = 0;
gdjs.PlayonlineCode.GDselesongtextObjects1.length = 0;
gdjs.PlayonlineCode.GDselesongtextObjects2.length = 0;
gdjs.PlayonlineCode.GDselesongtextObjects3.length = 0;
gdjs.PlayonlineCode.GDsongselectedtextObjects1.length = 0;
gdjs.PlayonlineCode.GDsongselectedtextObjects2.length = 0;
gdjs.PlayonlineCode.GDsongselectedtextObjects3.length = 0;
gdjs.PlayonlineCode.GDStartObjects1.length = 0;
gdjs.PlayonlineCode.GDStartObjects2.length = 0;
gdjs.PlayonlineCode.GDStartObjects3.length = 0;
gdjs.PlayonlineCode.GDStatisticsObjects1.length = 0;
gdjs.PlayonlineCode.GDStatisticsObjects2.length = 0;
gdjs.PlayonlineCode.GDStatisticsObjects3.length = 0;
gdjs.PlayonlineCode.GDComboNumbersObjects1.length = 0;
gdjs.PlayonlineCode.GDComboNumbersObjects2.length = 0;
gdjs.PlayonlineCode.GDComboNumbersObjects3.length = 0;
gdjs.PlayonlineCode.GDNotesSplashObjects1.length = 0;
gdjs.PlayonlineCode.GDNotesSplashObjects2.length = 0;
gdjs.PlayonlineCode.GDNotesSplashObjects3.length = 0;
gdjs.PlayonlineCode.GDfpsObjects1.length = 0;
gdjs.PlayonlineCode.GDfpsObjects2.length = 0;
gdjs.PlayonlineCode.GDfpsObjects3.length = 0;
gdjs.PlayonlineCode.GDEngineTextObjects1.length = 0;
gdjs.PlayonlineCode.GDEngineTextObjects2.length = 0;
gdjs.PlayonlineCode.GDEngineTextObjects3.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollBFObjects1.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollBFObjects2.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollBFObjects3.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollOPPObjects1.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollOPPObjects2.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollOPPObjects3.length = 0;
gdjs.PlayonlineCode.GDHitboxLeftObjects1.length = 0;
gdjs.PlayonlineCode.GDHitboxLeftObjects2.length = 0;
gdjs.PlayonlineCode.GDHitboxLeftObjects3.length = 0;
gdjs.PlayonlineCode.GDHitboxDownObjects1.length = 0;
gdjs.PlayonlineCode.GDHitboxDownObjects2.length = 0;
gdjs.PlayonlineCode.GDHitboxDownObjects3.length = 0;
gdjs.PlayonlineCode.GDHitboxUpObjects1.length = 0;
gdjs.PlayonlineCode.GDHitboxUpObjects2.length = 0;
gdjs.PlayonlineCode.GDHitboxUpObjects3.length = 0;
gdjs.PlayonlineCode.GDhitrightObjects1.length = 0;
gdjs.PlayonlineCode.GDhitrightObjects2.length = 0;
gdjs.PlayonlineCode.GDhitrightObjects3.length = 0;
gdjs.PlayonlineCode.GDBFIconObjects1.length = 0;
gdjs.PlayonlineCode.GDBFIconObjects2.length = 0;
gdjs.PlayonlineCode.GDBFIconObjects3.length = 0;
gdjs.PlayonlineCode.GDPauseButtonObjects1.length = 0;
gdjs.PlayonlineCode.GDPauseButtonObjects2.length = 0;
gdjs.PlayonlineCode.GDPauseButtonObjects3.length = 0;
gdjs.PlayonlineCode.GDPauseButton2Objects1.length = 0;
gdjs.PlayonlineCode.GDPauseButton2Objects2.length = 0;
gdjs.PlayonlineCode.GDPauseButton2Objects3.length = 0;
gdjs.PlayonlineCode.GDBlackScreenObjects1.length = 0;
gdjs.PlayonlineCode.GDBlackScreenObjects2.length = 0;
gdjs.PlayonlineCode.GDBlackScreenObjects3.length = 0;
gdjs.PlayonlineCode.GDPauseTextObjects1.length = 0;
gdjs.PlayonlineCode.GDPauseTextObjects2.length = 0;
gdjs.PlayonlineCode.GDPauseTextObjects3.length = 0;
gdjs.PlayonlineCode.GDExitTextObjects1.length = 0;
gdjs.PlayonlineCode.GDExitTextObjects2.length = 0;
gdjs.PlayonlineCode.GDExitTextObjects3.length = 0;
gdjs.PlayonlineCode.GDRestartTextObjects1.length = 0;
gdjs.PlayonlineCode.GDRestartTextObjects2.length = 0;
gdjs.PlayonlineCode.GDRestartTextObjects3.length = 0;
gdjs.PlayonlineCode.GDmisses_9595challenge_9595textObjects1.length = 0;
gdjs.PlayonlineCode.GDmisses_9595challenge_9595textObjects2.length = 0;
gdjs.PlayonlineCode.GDmisses_9595challenge_9595textObjects3.length = 0;
gdjs.PlayonlineCode.GDBfUpNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDBfUpNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDBfUpNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDBfDownNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDBfDownNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDBfDownNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDBfLeftNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDBfLeftNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDBfLeftNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDBfRightNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDBfRightNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDBfRightNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDOppIconObjects1.length = 0;
gdjs.PlayonlineCode.GDOppIconObjects2.length = 0;
gdjs.PlayonlineCode.GDOppIconObjects3.length = 0;
gdjs.PlayonlineCode.GDtimerBarObjects1.length = 0;
gdjs.PlayonlineCode.GDtimerBarObjects2.length = 0;
gdjs.PlayonlineCode.GDtimerBarObjects3.length = 0;
gdjs.PlayonlineCode.GDtimeObjects1.length = 0;
gdjs.PlayonlineCode.GDtimeObjects2.length = 0;
gdjs.PlayonlineCode.GDtimeObjects3.length = 0;
gdjs.PlayonlineCode.GDtimerBar2Objects1.length = 0;
gdjs.PlayonlineCode.GDtimerBar2Objects2.length = 0;
gdjs.PlayonlineCode.GDtimerBar2Objects3.length = 0;
gdjs.PlayonlineCode.GDRatinsPopUpObjects1.length = 0;
gdjs.PlayonlineCode.GDRatinsPopUpObjects2.length = 0;
gdjs.PlayonlineCode.GDRatinsPopUpObjects3.length = 0;
gdjs.PlayonlineCode.GDLongNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDLongNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDLongNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDnotesObjects1.length = 0;
gdjs.PlayonlineCode.GDnotesObjects2.length = 0;
gdjs.PlayonlineCode.GDnotesObjects3.length = 0;
gdjs.PlayonlineCode.GDOppLeftNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDOppLeftNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDOppLeftNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDOppDownNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDOppDownNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDOppDownNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDOppUpNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDOppUpNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDOppUpNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDOppRightNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDOppRightNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDOppRightNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDLongNoteOppObjects1.length = 0;
gdjs.PlayonlineCode.GDLongNoteOppObjects2.length = 0;
gdjs.PlayonlineCode.GDLongNoteOppObjects3.length = 0;

gdjs.PlayonlineCode.eventsList5(runtimeScene);
gdjs.PlayonlineCode.GDJoinObjects1.length = 0;
gdjs.PlayonlineCode.GDJoinObjects2.length = 0;
gdjs.PlayonlineCode.GDJoinObjects3.length = 0;
gdjs.PlayonlineCode.GDbackObjects1.length = 0;
gdjs.PlayonlineCode.GDbackObjects2.length = 0;
gdjs.PlayonlineCode.GDbackObjects3.length = 0;
gdjs.PlayonlineCode.GDBFObjects1.length = 0;
gdjs.PlayonlineCode.GDBFObjects2.length = 0;
gdjs.PlayonlineCode.GDBFObjects3.length = 0;
gdjs.PlayonlineCode.GDPlayer2textObjects1.length = 0;
gdjs.PlayonlineCode.GDPlayer2textObjects2.length = 0;
gdjs.PlayonlineCode.GDPlayer2textObjects3.length = 0;
gdjs.PlayonlineCode.GDPlayer1textObjects1.length = 0;
gdjs.PlayonlineCode.GDPlayer1textObjects2.length = 0;
gdjs.PlayonlineCode.GDPlayer1textObjects3.length = 0;
gdjs.PlayonlineCode.GDselesongtextObjects1.length = 0;
gdjs.PlayonlineCode.GDselesongtextObjects2.length = 0;
gdjs.PlayonlineCode.GDselesongtextObjects3.length = 0;
gdjs.PlayonlineCode.GDsongselectedtextObjects1.length = 0;
gdjs.PlayonlineCode.GDsongselectedtextObjects2.length = 0;
gdjs.PlayonlineCode.GDsongselectedtextObjects3.length = 0;
gdjs.PlayonlineCode.GDStartObjects1.length = 0;
gdjs.PlayonlineCode.GDStartObjects2.length = 0;
gdjs.PlayonlineCode.GDStartObjects3.length = 0;
gdjs.PlayonlineCode.GDStatisticsObjects1.length = 0;
gdjs.PlayonlineCode.GDStatisticsObjects2.length = 0;
gdjs.PlayonlineCode.GDStatisticsObjects3.length = 0;
gdjs.PlayonlineCode.GDComboNumbersObjects1.length = 0;
gdjs.PlayonlineCode.GDComboNumbersObjects2.length = 0;
gdjs.PlayonlineCode.GDComboNumbersObjects3.length = 0;
gdjs.PlayonlineCode.GDNotesSplashObjects1.length = 0;
gdjs.PlayonlineCode.GDNotesSplashObjects2.length = 0;
gdjs.PlayonlineCode.GDNotesSplashObjects3.length = 0;
gdjs.PlayonlineCode.GDfpsObjects1.length = 0;
gdjs.PlayonlineCode.GDfpsObjects2.length = 0;
gdjs.PlayonlineCode.GDfpsObjects3.length = 0;
gdjs.PlayonlineCode.GDEngineTextObjects1.length = 0;
gdjs.PlayonlineCode.GDEngineTextObjects2.length = 0;
gdjs.PlayonlineCode.GDEngineTextObjects3.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollBFObjects1.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollBFObjects2.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollBFObjects3.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollOPPObjects1.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollOPPObjects2.length = 0;
gdjs.PlayonlineCode.GDLongUpscrollOPPObjects3.length = 0;
gdjs.PlayonlineCode.GDHitboxLeftObjects1.length = 0;
gdjs.PlayonlineCode.GDHitboxLeftObjects2.length = 0;
gdjs.PlayonlineCode.GDHitboxLeftObjects3.length = 0;
gdjs.PlayonlineCode.GDHitboxDownObjects1.length = 0;
gdjs.PlayonlineCode.GDHitboxDownObjects2.length = 0;
gdjs.PlayonlineCode.GDHitboxDownObjects3.length = 0;
gdjs.PlayonlineCode.GDHitboxUpObjects1.length = 0;
gdjs.PlayonlineCode.GDHitboxUpObjects2.length = 0;
gdjs.PlayonlineCode.GDHitboxUpObjects3.length = 0;
gdjs.PlayonlineCode.GDhitrightObjects1.length = 0;
gdjs.PlayonlineCode.GDhitrightObjects2.length = 0;
gdjs.PlayonlineCode.GDhitrightObjects3.length = 0;
gdjs.PlayonlineCode.GDBFIconObjects1.length = 0;
gdjs.PlayonlineCode.GDBFIconObjects2.length = 0;
gdjs.PlayonlineCode.GDBFIconObjects3.length = 0;
gdjs.PlayonlineCode.GDPauseButtonObjects1.length = 0;
gdjs.PlayonlineCode.GDPauseButtonObjects2.length = 0;
gdjs.PlayonlineCode.GDPauseButtonObjects3.length = 0;
gdjs.PlayonlineCode.GDPauseButton2Objects1.length = 0;
gdjs.PlayonlineCode.GDPauseButton2Objects2.length = 0;
gdjs.PlayonlineCode.GDPauseButton2Objects3.length = 0;
gdjs.PlayonlineCode.GDBlackScreenObjects1.length = 0;
gdjs.PlayonlineCode.GDBlackScreenObjects2.length = 0;
gdjs.PlayonlineCode.GDBlackScreenObjects3.length = 0;
gdjs.PlayonlineCode.GDPauseTextObjects1.length = 0;
gdjs.PlayonlineCode.GDPauseTextObjects2.length = 0;
gdjs.PlayonlineCode.GDPauseTextObjects3.length = 0;
gdjs.PlayonlineCode.GDExitTextObjects1.length = 0;
gdjs.PlayonlineCode.GDExitTextObjects2.length = 0;
gdjs.PlayonlineCode.GDExitTextObjects3.length = 0;
gdjs.PlayonlineCode.GDRestartTextObjects1.length = 0;
gdjs.PlayonlineCode.GDRestartTextObjects2.length = 0;
gdjs.PlayonlineCode.GDRestartTextObjects3.length = 0;
gdjs.PlayonlineCode.GDmisses_9595challenge_9595textObjects1.length = 0;
gdjs.PlayonlineCode.GDmisses_9595challenge_9595textObjects2.length = 0;
gdjs.PlayonlineCode.GDmisses_9595challenge_9595textObjects3.length = 0;
gdjs.PlayonlineCode.GDBfUpNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDBfUpNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDBfUpNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDBfDownNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDBfDownNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDBfDownNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDBfLeftNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDBfLeftNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDBfLeftNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDBfRightNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDBfRightNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDBfRightNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDOppIconObjects1.length = 0;
gdjs.PlayonlineCode.GDOppIconObjects2.length = 0;
gdjs.PlayonlineCode.GDOppIconObjects3.length = 0;
gdjs.PlayonlineCode.GDtimerBarObjects1.length = 0;
gdjs.PlayonlineCode.GDtimerBarObjects2.length = 0;
gdjs.PlayonlineCode.GDtimerBarObjects3.length = 0;
gdjs.PlayonlineCode.GDtimeObjects1.length = 0;
gdjs.PlayonlineCode.GDtimeObjects2.length = 0;
gdjs.PlayonlineCode.GDtimeObjects3.length = 0;
gdjs.PlayonlineCode.GDtimerBar2Objects1.length = 0;
gdjs.PlayonlineCode.GDtimerBar2Objects2.length = 0;
gdjs.PlayonlineCode.GDtimerBar2Objects3.length = 0;
gdjs.PlayonlineCode.GDRatinsPopUpObjects1.length = 0;
gdjs.PlayonlineCode.GDRatinsPopUpObjects2.length = 0;
gdjs.PlayonlineCode.GDRatinsPopUpObjects3.length = 0;
gdjs.PlayonlineCode.GDLongNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDLongNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDLongNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDnotesObjects1.length = 0;
gdjs.PlayonlineCode.GDnotesObjects2.length = 0;
gdjs.PlayonlineCode.GDnotesObjects3.length = 0;
gdjs.PlayonlineCode.GDOppLeftNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDOppLeftNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDOppLeftNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDOppDownNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDOppDownNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDOppDownNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDOppUpNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDOppUpNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDOppUpNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDOppRightNoteObjects1.length = 0;
gdjs.PlayonlineCode.GDOppRightNoteObjects2.length = 0;
gdjs.PlayonlineCode.GDOppRightNoteObjects3.length = 0;
gdjs.PlayonlineCode.GDLongNoteOppObjects1.length = 0;
gdjs.PlayonlineCode.GDLongNoteOppObjects2.length = 0;
gdjs.PlayonlineCode.GDLongNoteOppObjects3.length = 0;


return;

}

gdjs['PlayonlineCode'] = gdjs.PlayonlineCode;
